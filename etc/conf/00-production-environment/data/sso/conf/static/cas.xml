<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE properties SYSTEM "http://java.sun.com/dtd/properties.dtd">
<properties>
    <comment>Security Configuration</comment>

    <!-- Database conection -->
    <!-- ORACLE -->
    <entry key="metamac.security.datasource.url">jdbc:oracle:thin:@FILL_ME_WITH_HOST:FILL_ME_WITH_PORT:XE</entry>
    <entry key="metamac.security.datasource.username">FILL_ME_WITH_DB_USER</entry>
    <entry key="metamac.security.datasource.password">FILL_ME_WITH_DB_PASSWORD</entry>
    <entry key="metamac.security.datasource.driver_name">oracle.jdbc.driver.OracleDriver</entry>
    <!-- MS SQL -->
    <!-- 
    <entry key="metamac.security.datasource.url">jdbc:sqlserver://FILL_ME_WITH_HOST:FILL_ME_WITH_PORT;databaseName=DATABASE_NAME</entry>
    <entry key="metamac.security.datasource.username">FILL_ME_WITH_DB_USER</entry>
    <entry key="metamac.security.datasource.password">FILL_ME_WITH_DB_PASSWORD</entry>
    <entry key="metamac.security.datasource.driver_name">com.microsoft.sqlserver.jdbc.SQLServerDriver</entry>
    -->

    <!-- URL LDAP Directory -->
    <entry key="metamac.security.ldap.url">FILL_ME_WITH_LDAP_URL</entry>

    <!-- DN user to execute queries in LDAP Directory -->
    <!-- Sample: cn=admin,dc=mycompany,dc=com -->
    <entry key="metamac.security.ldap.user_dn">FILL_ME_WITH_DN_USER</entry>

    <!-- Password of user than can execute queries in LDAP Directory -->
    <entry key="metamac.security.ldap.password">FILL_ME_WITH_USER_PASSWORD</entry>

    <!-- Filter to execute queries to restrieve users -->
    <!-- Sample: uid=%u -->
    <entry key="metamac.security.ldap.filter">FILL_ME_WITH_USER_QUERY</entry>

    <!-- DN base where users are located in LDAP Directory -->
    <!-- Sample: ou=users,dc=mycompany,dc=com -->
    <entry key="metamac.security.ldap.search_base"></entry>

    <!-- Query ORACLE -->
    <entry key="metamac.security.datasource.query.attributes"><![CDATA[
        SELECT usr.username as username, 'ACL' as acl_name,  app.code || '#' || rol.code || '#' || operations.code as acl_value
        FROM TB_ACCESS acc
        LEFT JOIN TB_USERS usr ON acc.USER_FK = usr.ID
        LEFT JOIN TB_ROLES rol ON acc.ROLE_FK = rol.ID
        LEFT JOIN TB_APPS app ON acc.APP_FK = app.ID
        LEFT JOIN TB_EXTERNAL_ITEMS operations ON acc.OPERATION_FK = operations.ID
        WHERE REMOVAL_DATE IS NULL AND {0}
    ]]></entry>

    <!-- QUERY MS SQL -->
    <!--
        <entry key="metamac.security.datasource.query.attributes"><![CDATA[
        SELECT usr.username as username, 'ACL' as acl_name, ISNULL(app.code, '') + '#' + ISNULL(rol.code, '') + '#' + ISNULL(operations.code, '') as acl_value
        FROM TB_ACCESS acc
        LEFT JOIN TB_USERS usr ON acc.USER_FK = usr.ID
        LEFT JOIN TB_ROLES rol ON acc.ROLE_FK = rol.ID
        LEFT JOIN TB_APPS app ON acc.APP_FK = app.ID
        LEFT JOIN TB_EXTERNAL_ITEMS operations ON acc.OPERATION_FK = operations.ID
        WHERE REMOVAL_DATE IS NULL AND {0}
        ]]></entry>
    -->

</properties>
